---json
{
  "layout": false,
  "eleventyExcludeFromCollections": true,
  "permalink": "/feed.json"
}
---
<%_ const pages = collections.feed _%>
{
  "version": "https://jsonfeed.org/version/1",
  "title": "<%= meta.title %>",
  "description": "<%= meta.title %>",
  "home_page_url": "<%= meta.domain %>",
  "feed_url": "<%= meta.domain %>/feed.json",
  "author": {
    "name": "<%= meta.title %>",
    "url": "<%= meta.domain %>"
  },
  "items": [
    <% pages.forEach((page, i) => { %>
    <% if (i !== 0) { %>,<% } %>
    {
      "title": "<%= page.data.title %>",
      "date_published": "<%= page.date.toISOString() %>",
      "id": "<%= meta.domain %><%= page.url %>",
      "url": "<%= meta.domain %><%= page.url %>",
      "content_html": <%- JSON.stringify(page.templateContent) %>
    }
    <% }) %>
  ]
}